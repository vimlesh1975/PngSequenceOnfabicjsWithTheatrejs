<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./fabric.js"></script>

<body>
    <canvas id="canvas" width="1920" height="1080"></canvas>
</body>

<script type="module">
    import 'https://cdn.jsdelivr.net/npm/@theatre/browser-bundles@0.6.0/dist/core-and-studio.js';
    const { core, studio } = Theatre;
    studio.initialize(); // Start the Theatre.js UI
    var canvas = new fabric.Canvas('canvas');
    window.canvas = canvas;

    const project = core.getProject('fabricjs png sequence');
    const sheet = project.sheet('Sheet 1');
    const arrObject = [];
    const getObjectbyId = (id) => {
        return arrObject.find((object) => object.address.objectKey === id);
    };

    function padNumber(number, length) {
        return String(number).padStart(length, '0');
    }
    for (let i = 0; i <= 5; i++) {
        const paddedFrameNumber = padNumber(i, 3);
        const imageUrl = `dd/Sankranthi2024${paddedFrameNumber}.png`
        fabric.Image.fromURL(imageUrl, img => {
            img.set({ left: 550, top: 50, scaleX: 0.5, scaleY: 0.5, id: 'ccg_' + i });
            canvas.add(img);
            img.on('mousedown', () => {
                studio.setSelection([getObjectbyId(img.id)]);
            });
            const id_1 = sheet.object(img.id, { opacity: core.types.number(1, { range: [0, 1] }) });
            arrObject.push(id_1);

            id_1.onValuesChange((val) => {
                img.set({ opacity: val.opacity })
                img.setCoords();
                canvas.requestRenderAll();
            })
        }
        );
    }
</script>

</html>